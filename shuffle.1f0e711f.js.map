{"version":3,"sources":["../scripts/shuffle.js"],"names":["global","factory","exports","module","define","amd","Shuffle","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_inherits","subClass","superClass","create","constructor","value","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","call","E","on","name","callback","ctx","e","push","fn","once","listener","off","apply","arguments","_","emit","data","slice","evtArr","len","evts","liveEvents","tinyEmitter","proto","Element","vendor","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","match","el","selector","nodeType","nodes","parentNode","querySelectorAll","throttleit","throttle","func","wait","args","rtn","timeoutID","last","throttled","delta","Date","setTimeout","arrayParallel","parallel","fns","context","noop","pending","finished","results","Array","forEach","maybeDone","err","result","getNumber","parseFloat","Point","x","y","equals","a","b","Rect","w","h","id","left","top","width","height","intersects","Classes","BASE","SHUFFLE_ITEM","VISIBLE","HIDDEN","id$1","ShuffleItem","element","isVisible","isHidden","show","classList","remove","add","removeAttribute","hide","setAttribute","init","addClasses","applyCss","Css","INITIAL","scale","Scale","point","classes","_this","className","removeClasses","_this2","obj","_this3","keys","style","dispose","position","visibility","before","opacity","after","transitionDelay","testComputedSize","document","body","documentElement","createElement","cssText","appendChild","window","getComputedStyle","removeChild","getNumberStyle","styles","undefined","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","randomize","array","n","Math","floor","random","temp","defaults","reverse","by","compare","sorter","arr","options","opts","assign","original","from","revert","sort","valA","valB","transitions","eventName","count","uniqueId","cancelTransitionEnd","removeEventListener","onTransitionEnd","evt","currentTarget","addEventListener","arrayMax","max","arrayMin","min","getColumnSpan","itemWidth","columnWidth","columns","threshold","columnSpan","abs","round","ceil","getAvailablePositions","positions","available","getShortColumn","buffer","minPosition","getItemPosition","_ref","itemSize","gridSize","total","span","setY","shortColumnIndex","setHeight","getCenteredPositions","itemRects","containerWidth","rowMap","itemRect","rects","rows","centeredRows","lastItem","end","offset","finalRects","canMove","newRects","every","r","newRect","noOverlap","some","intersectingRect","hasOverlap","rowIndex","findIndex","items","includes","splice","concat","map","hyphenate","str","replace","m1","toLowerCase","arrayUnique","Set","id$2","_TinyEmitter","delimeter","delimiter","lastSort","group","ALL_ITEMS","lastFilter","isEnabled","isDestroyed","isInitialized","_transitions","isTransitioning","_queue","_getElementOption","_init","_getItems","sizer","_initItems","_onResize","_getResizeFunction","readyState","layout","bind","onLoad","containerCss","getSize","_validateStyles","_setColumns","filter","initialSort","offsetWidth","setItemTransitions","transition","speed","easing","resizeFunction","_handleResize","throttleTime","option","querySelector","jquery","overflow","_filter","category","collection","set","_getFilteredSets","_toggleFilterClasses","visible","hidden","item","_doesPassFilter","attr","getAttribute","FILTER_ATTRIBUTE_KEY","split","JSON","parse","testCategory","isArray","filterMode","FilterMode","ANY","_disposeItems","_updateItemCount","visibleItems","_getFilteredItems","_this$options","positionProps","useTransforms","cssProps","k","properties","join","transitionDuration","transitionTimingFunction","transitionProperty","children","itemSelector","_mergeNewItems","indexOf","_getConcealedItems","_getColumnSize","gutterSize","size","_getGutterSize","gutterWidth","gutter","calculatedColumns","columnThreshold","cols","colWidth","_setContainerSize","_getContainerSize","_getStaggerAmount","index","staggerAmount","staggerAmountMax","_dispatch","shuffle","_resetCols","_layout","_this4","itemPositions","_getNextPositions","getStylesForTransition","_this5","isCentered","itemsData","_getItemPosition","getTransformedPositions","_shrink","_this6","update","styleObject","roundTransforms","transform","_whenTransitionDone","itemCallback","done","_getTransitionFunction","_this7","_processQueue","_cancelMovement","hasSpeed","hasQueue","_startTransitions","_styleImmediately","EventType","LAYOUT","_this8","callbacks","_movementFinished","objects","elements","_skipTransitions","sortObj","sortOptions","isOnlyLayout","newItems","_this9","allItems","sortedItems","allSortedItemsSet","isNewItem","applyHiddenState","disable","enable","isUpdateLayout","_this10","oldItems","getItemByElement","handleLayout","REMOVED","find","resetItems","_this11","destroy","includeMargins","marginLeft","marginRight","marginTop","marginBottom","zero","duration","delay","ALL","__sorter","__getColumnSpan","__getAvailablePositions","__getShortColumn","__getCenteredPositions"],"mappings":"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","file":"shuffle.1f0e711f.js","sourceRoot":"..\\src\\views","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.Shuffle = factory());\n}(this, (function () { 'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function E () {\n    // Keep this empty so it's easier to inherit from\n    // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n  }\n\n  E.prototype = {\n    on: function (name, callback, ctx) {\n      var e = this.e || (this.e = {});\n\n      (e[name] || (e[name] = [])).push({\n        fn: callback,\n        ctx: ctx\n      });\n\n      return this;\n    },\n\n    once: function (name, callback, ctx) {\n      var self = this;\n      function listener () {\n        self.off(name, listener);\n        callback.apply(ctx, arguments);\n      }\n      listener._ = callback;\n      return this.on(name, listener, ctx);\n    },\n\n    emit: function (name) {\n      var data = [].slice.call(arguments, 1);\n      var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n      var i = 0;\n      var len = evtArr.length;\n\n      for (i; i < len; i++) {\n        evtArr[i].fn.apply(evtArr[i].ctx, data);\n      }\n\n      return this;\n    },\n\n    off: function (name, callback) {\n      var e = this.e || (this.e = {});\n      var evts = e[name];\n      var liveEvents = [];\n\n      if (evts && callback) {\n        for (var i = 0, len = evts.length; i < len; i++) {\n          if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n            liveEvents.push(evts[i]);\n        }\n      }\n\n      // Remove event from queue to prevent memory leak\n      // Suggested by https://github.com/lazd\n      // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n      (liveEvents.length)\n        ? e[name] = liveEvents\n        : delete e[name];\n\n      return this;\n    }\n  };\n\n  var tinyEmitter = E;\n\n  var proto = typeof Element !== 'undefined' ? Element.prototype : {};\n  var vendor = proto.matches\n    || proto.matchesSelector\n    || proto.webkitMatchesSelector\n    || proto.mozMatchesSelector\n    || proto.msMatchesSelector\n    || proto.oMatchesSelector;\n\n  var matchesSelector = match;\n\n  /**\n   * Match `el` to `selector`.\n   *\n   * @param {Element} el\n   * @param {String} selector\n   * @return {Boolean}\n   * @api public\n   */\n\n  function match(el, selector) {\n    if (!el || el.nodeType !== 1) return false;\n    if (vendor) return vendor.call(el, selector);\n    var nodes = el.parentNode.querySelectorAll(selector);\n    for (var i = 0; i < nodes.length; i++) {\n      if (nodes[i] == el) return true;\n    }\n    return false;\n  }\n\n  var throttleit = throttle;\n\n  /**\n   * Returns a new function that, when invoked, invokes `func` at most once per `wait` milliseconds.\n   *\n   * @param {Function} func Function to wrap.\n   * @param {Number} wait Number of milliseconds that must elapse between `func` invocations.\n   * @return {Function} A new function that wraps the `func` function passed in.\n   */\n\n  function throttle (func, wait) {\n    var ctx, args, rtn, timeoutID; // caching\n    var last = 0;\n\n    return function throttled () {\n      ctx = this;\n      args = arguments;\n      var delta = new Date() - last;\n      if (!timeoutID)\n        if (delta >= wait) call();\n        else timeoutID = setTimeout(call, wait - delta);\n      return rtn;\n    };\n\n    function call () {\n      timeoutID = 0;\n      last = +new Date();\n      rtn = func.apply(ctx, args);\n      ctx = null;\n      args = null;\n    }\n  }\n\n  var arrayParallel = function parallel(fns, context, callback) {\n    if (!callback) {\n      if (typeof context === 'function') {\n        callback = context;\n        context = null;\n      } else {\n        callback = noop;\n      }\n    }\n\n    var pending = fns && fns.length;\n    if (!pending) return callback(null, []);\n\n    var finished = false;\n    var results = new Array(pending);\n\n    fns.forEach(context ? function (fn, i) {\n      fn.call(context, maybeDone(i));\n    } : function (fn, i) {\n      fn(maybeDone(i));\n    });\n\n    function maybeDone(i) {\n      return function (err, result) {\n        if (finished) return;\n\n        if (err) {\n          callback(err, results);\n          finished = true;\n          return\n        }\n\n        results[i] = result;\n\n        if (!--pending) callback(null, results);\n      }\n    }\n  };\n\n  function noop() {}\n\n  /**\n   * Always returns a numeric value, given a value. Logic from jQuery's `isNumeric`.\n   * @param {*} value Possibly numeric value.\n   * @return {number} `value` or zero if `value` isn't numeric.\n   */\n  function getNumber(value) {\n    return parseFloat(value) || 0;\n  }\n\n  var Point =\n  /*#__PURE__*/\n  function () {\n    /**\n     * Represents a coordinate pair.\n     * @param {number} [x=0] X.\n     * @param {number} [y=0] Y.\n     */\n    function Point(x, y) {\n      _classCallCheck(this, Point);\n\n      this.x = getNumber(x);\n      this.y = getNumber(y);\n    }\n    /**\n     * Whether two points are equal.\n     * @param {Point} a Point A.\n     * @param {Point} b Point B.\n     * @return {boolean}\n     */\n\n\n    _createClass(Point, null, [{\n      key: \"equals\",\n      value: function equals(a, b) {\n        return a.x === b.x && a.y === b.y;\n      }\n    }]);\n\n    return Point;\n  }();\n\n  var Rect =\n  /*#__PURE__*/\n  function () {\n    /**\n     * Class for representing rectangular regions.\n     * https://github.com/google/closure-library/blob/master/closure/goog/math/rect.js\n     * @param {number} x Left.\n     * @param {number} y Top.\n     * @param {number} w Width.\n     * @param {number} h Height.\n     * @param {number} id Identifier\n     * @constructor\n     */\n    function Rect(x, y, w, h, id) {\n      _classCallCheck(this, Rect);\n\n      this.id = id;\n      /** @type {number} */\n\n      this.left = x;\n      /** @type {number} */\n\n      this.top = y;\n      /** @type {number} */\n\n      this.width = w;\n      /** @type {number} */\n\n      this.height = h;\n    }\n    /**\n     * Returns whether two rectangles intersect.\n     * @param {Rect} a A Rectangle.\n     * @param {Rect} b A Rectangle.\n     * @return {boolean} Whether a and b intersect.\n     */\n\n\n    _createClass(Rect, null, [{\n      key: \"intersects\",\n      value: function intersects(a, b) {\n        return a.left < b.left + b.width && b.left < a.left + a.width && a.top < b.top + b.height && b.top < a.top + a.height;\n      }\n    }]);\n\n    return Rect;\n  }();\n\n  var Classes = {\n    BASE: 'shuffle',\n    SHUFFLE_ITEM: 'shuffle-item',\n    VISIBLE: 'shuffle-item--visible',\n    HIDDEN: 'shuffle-item--hidden'\n  };\n\n  var id$1 = 0;\n\n  var ShuffleItem =\n  /*#__PURE__*/\n  function () {\n    function ShuffleItem(element) {\n      _classCallCheck(this, ShuffleItem);\n\n      id$1 += 1;\n      this.id = id$1;\n      this.element = element;\n      /**\n       * Used to separate items for layout and shrink.\n       */\n\n      this.isVisible = true;\n      /**\n       * Used to determine if a transition will happen. By the time the _layout\n       * and _shrink methods get the ShuffleItem instances, the `isVisible` value\n       * has already been changed by the separation methods, so this property is\n       * needed to know if the item was visible/hidden before the shrink/layout.\n       */\n\n      this.isHidden = false;\n    }\n\n    _createClass(ShuffleItem, [{\n      key: \"show\",\n      value: function show() {\n        this.isVisible = true;\n        this.element.classList.remove(Classes.HIDDEN);\n        this.element.classList.add(Classes.VISIBLE);\n        this.element.removeAttribute('aria-hidden');\n      }\n    }, {\n      key: \"hide\",\n      value: function hide() {\n        this.isVisible = false;\n        this.element.classList.remove(Classes.VISIBLE);\n        this.element.classList.add(Classes.HIDDEN);\n        this.element.setAttribute('aria-hidden', true);\n      }\n    }, {\n      key: \"init\",\n      value: function init() {\n        this.addClasses([Classes.SHUFFLE_ITEM, Classes.VISIBLE]);\n        this.applyCss(ShuffleItem.Css.INITIAL);\n        this.scale = ShuffleItem.Scale.VISIBLE;\n        this.point = new Point();\n      }\n    }, {\n      key: \"addClasses\",\n      value: function addClasses(classes) {\n        var _this = this;\n\n        classes.forEach(function (className) {\n          _this.element.classList.add(className);\n        });\n      }\n    }, {\n      key: \"removeClasses\",\n      value: function removeClasses(classes) {\n        var _this2 = this;\n\n        classes.forEach(function (className) {\n          _this2.element.classList.remove(className);\n        });\n      }\n    }, {\n      key: \"applyCss\",\n      value: function applyCss(obj) {\n        var _this3 = this;\n\n        Object.keys(obj).forEach(function (key) {\n          _this3.element.style[key] = obj[key];\n        });\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        this.removeClasses([Classes.HIDDEN, Classes.VISIBLE, Classes.SHUFFLE_ITEM]);\n        this.element.removeAttribute('style');\n        this.element = null;\n      }\n    }]);\n\n    return ShuffleItem;\n  }();\n\n  ShuffleItem.Css = {\n    INITIAL: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      visibility: 'visible',\n      'will-change': 'transform'\n    },\n    VISIBLE: {\n      before: {\n        opacity: 1,\n        visibility: 'visible'\n      },\n      after: {\n        transitionDelay: ''\n      }\n    },\n    HIDDEN: {\n      before: {\n        opacity: 0\n      },\n      after: {\n        visibility: 'hidden',\n        transitionDelay: ''\n      }\n    }\n  };\n  ShuffleItem.Scale = {\n    VISIBLE: 1,\n    HIDDEN: 0.001\n  };\n\n  var value = null;\n  var testComputedSize = (function () {\n    if (value !== null) {\n      return value;\n    }\n\n    var element = document.body || document.documentElement;\n    var e = document.createElement('div');\n    e.style.cssText = 'width:10px;padding:2px;box-sizing:border-box;';\n    element.appendChild(e);\n    value = window.getComputedStyle(e, null).width === '10px';\n    element.removeChild(e);\n    return value;\n  });\n\n  /**\n   * Retrieve the computed style for an element, parsed as a float.\n   * @param {Element} element Element to get style for.\n   * @param {string} style Style property.\n   * @param {CSSStyleDeclaration} [styles] Optionally include clean styles to\n   *     use instead of asking for them again.\n   * @return {number} The parsed computed value or zero if that fails because IE\n   *     will return 'auto' when the element doesn't have margins instead of\n   *     the computed style.\n   */\n\n  function getNumberStyle(element, style) {\n    var styles = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window.getComputedStyle(element, null);\n    var value = getNumber(styles[style]); // Support IE<=11 and W3C spec.\n\n    if (!testComputedSize() && style === 'width') {\n      value += getNumber(styles.paddingLeft) + getNumber(styles.paddingRight) + getNumber(styles.borderLeftWidth) + getNumber(styles.borderRightWidth);\n    } else if (!testComputedSize() && style === 'height') {\n      value += getNumber(styles.paddingTop) + getNumber(styles.paddingBottom) + getNumber(styles.borderTopWidth) + getNumber(styles.borderBottomWidth);\n    }\n\n    return value;\n  }\n\n  /**\n   * Fisher-Yates shuffle.\n   * http://stackoverflow.com/a/962890/373422\n   * https://bost.ocks.org/mike/shuffle/\n   * @param {Array} array Array to shuffle.\n   * @return {Array} Randomly sorted array.\n   */\n  function randomize(array) {\n    var n = array.length;\n\n    while (n) {\n      n -= 1;\n      var i = Math.floor(Math.random() * (n + 1));\n      var temp = array[i];\n      array[i] = array[n];\n      array[n] = temp;\n    }\n\n    return array;\n  }\n\n  var defaults = {\n    // Use array.reverse() to reverse the results\n    reverse: false,\n    // Sorting function\n    by: null,\n    // Custom sort function\n    compare: null,\n    // If true, this will skip the sorting and return a randomized order in the array\n    randomize: false,\n    // Determines which property of each item in the array is passed to the\n    // sorting method.\n    key: 'element'\n  }; // You can return `undefined` from the `by` function to revert to DOM order.\n\n  function sorter(arr, options) {\n    var opts = Object.assign({}, defaults, options);\n    var original = Array.from(arr);\n    var revert = false;\n\n    if (!arr.length) {\n      return [];\n    }\n\n    if (opts.randomize) {\n      return randomize(arr);\n    } // Sort the elements by the opts.by function.\n    // If we don't have opts.by, default to DOM order\n\n\n    if (typeof opts.by === 'function') {\n      arr.sort(function (a, b) {\n        // Exit early if we already know we want to revert\n        if (revert) {\n          return 0;\n        }\n\n        var valA = opts.by(a[opts.key]);\n        var valB = opts.by(b[opts.key]); // If both values are undefined, use the DOM order\n\n        if (valA === undefined && valB === undefined) {\n          revert = true;\n          return 0;\n        }\n\n        if (valA < valB || valA === 'sortFirst' || valB === 'sortLast') {\n          return -1;\n        }\n\n        if (valA > valB || valA === 'sortLast' || valB === 'sortFirst') {\n          return 1;\n        }\n\n        return 0;\n      });\n    } else if (typeof opts.compare === 'function') {\n      arr.sort(opts.compare);\n    } // Revert to the original array if necessary\n\n\n    if (revert) {\n      return original;\n    }\n\n    if (opts.reverse) {\n      arr.reverse();\n    }\n\n    return arr;\n  }\n\n  var transitions = {};\n  var eventName = 'transitionend';\n  var count = 0;\n\n  function uniqueId() {\n    count += 1;\n    return eventName + count;\n  }\n\n  function cancelTransitionEnd(id) {\n    if (transitions[id]) {\n      transitions[id].element.removeEventListener(eventName, transitions[id].listener);\n      transitions[id] = null;\n      return true;\n    }\n\n    return false;\n  }\n  function onTransitionEnd(element, callback) {\n    var id = uniqueId();\n\n    var listener = function listener(evt) {\n      if (evt.currentTarget === evt.target) {\n        cancelTransitionEnd(id);\n        callback(evt);\n      }\n    };\n\n    element.addEventListener(eventName, listener);\n    transitions[id] = {\n      element: element,\n      listener: listener\n    };\n    return id;\n  }\n\n  function arrayMax(array) {\n    return Math.max.apply(Math, array); // eslint-disable-line prefer-spread\n  }\n\n  function arrayMin(array) {\n    return Math.min.apply(Math, array); // eslint-disable-line prefer-spread\n  }\n\n  /**\n   * Determine the number of columns an items spans.\n   * @param {number} itemWidth Width of the item.\n   * @param {number} columnWidth Width of the column (includes gutter).\n   * @param {number} columns Total number of columns\n   * @param {number} threshold A buffer value for the size of the column to fit.\n   * @return {number}\n   */\n\n  function getColumnSpan(itemWidth, columnWidth, columns, threshold) {\n    var columnSpan = itemWidth / columnWidth; // If the difference between the rounded column span number and the\n    // calculated column span number is really small, round the number to\n    // make it fit.\n\n    if (Math.abs(Math.round(columnSpan) - columnSpan) < threshold) {\n      // e.g. columnSpan = 4.0089945390298745\n      columnSpan = Math.round(columnSpan);\n    } // Ensure the column span is not more than the amount of columns in the whole layout.\n\n\n    return Math.min(Math.ceil(columnSpan), columns);\n  }\n  /**\n   * Retrieves the column set to use for placement.\n   * @param {number} columnSpan The number of columns this current item spans.\n   * @param {number} columns The total columns in the grid.\n   * @return {Array.<number>} An array of numbers represeting the column set.\n   */\n\n  function getAvailablePositions(positions, columnSpan, columns) {\n    // The item spans only one column.\n    if (columnSpan === 1) {\n      return positions;\n    } // The item spans more than one column, figure out how many different\n    // places it could fit horizontally.\n    // The group count is the number of places within the positions this block\n    // could fit, ignoring the current positions of items.\n    // Imagine a 2 column brick as the second item in a 4 column grid with\n    // 10px height each. Find the places it would fit:\n    // [20, 10, 10, 0]\n    //  |   |   |\n    //  *   *   *\n    //\n    // Then take the places which fit and get the bigger of the two:\n    // max([20, 10]), max([10, 10]), max([10, 0]) = [20, 10, 10]\n    //\n    // Next, find the first smallest number (the short column).\n    // [20, 10, 10]\n    //      |\n    //      *\n    //\n    // And that's where it should be placed!\n    //\n    // Another example where the second column's item extends past the first:\n    // [10, 20, 10, 0] => [20, 20, 10] => 10\n\n\n    var available = []; // For how many possible positions for this item there are.\n\n    for (var i = 0; i <= columns - columnSpan; i++) {\n      // Find the bigger value for each place it could fit.\n      available.push(arrayMax(positions.slice(i, i + columnSpan)));\n    }\n\n    return available;\n  }\n  /**\n   * Find index of short column, the first from the left where this item will go.\n   *\n   * @param {Array.<number>} positions The array to search for the smallest number.\n   * @param {number} buffer Optional buffer which is very useful when the height\n   *     is a percentage of the width.\n   * @return {number} Index of the short column.\n   */\n\n  function getShortColumn(positions, buffer) {\n    var minPosition = arrayMin(positions);\n\n    for (var i = 0, len = positions.length; i < len; i++) {\n      if (positions[i] >= minPosition - buffer && positions[i] <= minPosition + buffer) {\n        return i;\n      }\n    }\n\n    return 0;\n  }\n  /**\n   * Determine the location of the next item, based on its size.\n   * @param {Object} itemSize Object with width and height.\n   * @param {Array.<number>} positions Positions of the other current items.\n   * @param {number} gridSize The column width or row height.\n   * @param {number} total The total number of columns or rows.\n   * @param {number} threshold Buffer value for the column to fit.\n   * @param {number} buffer Vertical buffer for the height of items.\n   * @return {Point}\n   */\n\n  function getItemPosition(_ref) {\n    var itemSize = _ref.itemSize,\n        positions = _ref.positions,\n        gridSize = _ref.gridSize,\n        total = _ref.total,\n        threshold = _ref.threshold,\n        buffer = _ref.buffer;\n    var span = getColumnSpan(itemSize.width, gridSize, total, threshold);\n    var setY = getAvailablePositions(positions, span, total);\n    var shortColumnIndex = getShortColumn(setY, buffer); // Position the item\n\n    var point = new Point(gridSize * shortColumnIndex, setY[shortColumnIndex]); // Update the columns array with the new values for each column.\n    // e.g. before the update the columns could be [250, 0, 0, 0] for an item\n    // which spans 2 columns. After it would be [250, itemHeight, itemHeight, 0].\n\n    var setHeight = setY[shortColumnIndex] + itemSize.height;\n\n    for (var i = 0; i < span; i++) {\n      positions[shortColumnIndex + i] = setHeight;\n    }\n\n    return point;\n  }\n  /**\n   * This method attempts to center items. This method could potentially be slow\n   * with a large number of items because it must place items, then check every\n   * previous item to ensure there is no overlap.\n   * @param {Array.<Rect>} itemRects Item data objects.\n   * @param {number} containerWidth Width of the containing element.\n   * @return {Array.<Point>}\n   */\n\n  function getCenteredPositions(itemRects, containerWidth) {\n    var rowMap = {}; // Populate rows by their offset because items could jump between rows like:\n    // a   c\n    //  bbb\n\n    itemRects.forEach(function (itemRect) {\n      if (rowMap[itemRect.top]) {\n        // Push the point to the last row array.\n        rowMap[itemRect.top].push(itemRect);\n      } else {\n        // Start of a new row.\n        rowMap[itemRect.top] = [itemRect];\n      }\n    }); // For each row, find the end of the last item, then calculate\n    // the remaining space by dividing it by 2. Then add that\n    // offset to the x position of each point.\n\n    var rects = [];\n    var rows = [];\n    var centeredRows = [];\n    Object.keys(rowMap).forEach(function (key) {\n      var itemRects = rowMap[key];\n      rows.push(itemRects);\n      var lastItem = itemRects[itemRects.length - 1];\n      var end = lastItem.left + lastItem.width;\n      var offset = Math.round((containerWidth - end) / 2);\n      var finalRects = itemRects;\n      var canMove = false;\n\n      if (offset > 0) {\n        var newRects = [];\n        canMove = itemRects.every(function (r) {\n          var newRect = new Rect(r.left + offset, r.top, r.width, r.height, r.id); // Check all current rects to make sure none overlap.\n\n          var noOverlap = !rects.some(function (r) {\n            return Rect.intersects(newRect, r);\n          });\n          newRects.push(newRect);\n          return noOverlap;\n        }); // If none of the rectangles overlapped, the whole group can be centered.\n\n        if (canMove) {\n          finalRects = newRects;\n        }\n      } // If the items are not going to be offset, ensure that the original\n      // placement for this row will not overlap previous rows (row-spanning\n      // elements could be in the way).\n\n\n      if (!canMove) {\n        var intersectingRect;\n        var hasOverlap = itemRects.some(function (itemRect) {\n          return rects.some(function (r) {\n            var intersects = Rect.intersects(itemRect, r);\n\n            if (intersects) {\n              intersectingRect = r;\n            }\n\n            return intersects;\n          });\n        }); // If there is any overlap, replace the overlapping row with the original.\n\n        if (hasOverlap) {\n          var rowIndex = centeredRows.findIndex(function (items) {\n            return items.includes(intersectingRect);\n          });\n          centeredRows.splice(rowIndex, 1, rows[rowIndex]);\n        }\n      }\n\n      rects = rects.concat(finalRects);\n      centeredRows.push(finalRects);\n    }); // Reduce array of arrays to a single array of points.\n    // https://stackoverflow.com/a/10865042/373422\n    // Then reset sort back to how the items were passed to this method.\n    // Remove the wrapper object with index, map to a Point.\n\n    return [].concat.apply([], centeredRows) // eslint-disable-line prefer-spread\n    .sort(function (a, b) {\n      return a.id - b.id;\n    }).map(function (itemRect) {\n      return new Point(itemRect.left, itemRect.top);\n    });\n  }\n\n  /**\n   * Hyphenates a javascript style string to a css one. For example:\n   * MozBoxSizing -> -moz-box-sizing.\n   * @param {string} str The string to hyphenate.\n   * @return {string} The hyphenated string.\n   */\n  function hyphenate(str) {\n    return str.replace(/([A-Z])/g, function (str, m1) {\n      return \"-\".concat(m1.toLowerCase());\n    });\n  }\n\n  function arrayUnique(x) {\n    return Array.from(new Set(x));\n  } // Used for unique instance variables\n\n\n  var id$2 = 0;\n\n  var Shuffle =\n  /*#__PURE__*/\n  function (_TinyEmitter) {\n    _inherits(Shuffle, _TinyEmitter);\n\n    /**\n     * Categorize, sort, and filter a responsive grid of items.\n     *\n     * @param {Element} element An element which is the parent container for the grid items.\n     * @param {Object} [options=Shuffle.options] Options object.\n     * @constructor\n     */\n    function Shuffle(element) {\n      var _this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Shuffle);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(Shuffle).call(this));\n      _this.options = Object.assign({}, Shuffle.options, options); // Allow misspelling of delimiter since that's how it used to be.\n      // Remove in v6.\n\n      if (_this.options.delimeter) {\n        _this.options.delimiter = _this.options.delimeter;\n      }\n\n      _this.lastSort = {};\n      _this.group = Shuffle.ALL_ITEMS;\n      _this.lastFilter = Shuffle.ALL_ITEMS;\n      _this.isEnabled = true;\n      _this.isDestroyed = false;\n      _this.isInitialized = false;\n      _this._transitions = [];\n      _this.isTransitioning = false;\n      _this._queue = [];\n\n      var el = _this._getElementOption(element);\n\n      if (!el) {\n        throw new TypeError('Shuffle needs to be initialized with an element.');\n      }\n\n      _this.element = el;\n      _this.id = 'shuffle_' + id$2;\n      id$2 += 1;\n\n      _this._init();\n\n      _this.isInitialized = true;\n      return _this;\n    }\n\n    _createClass(Shuffle, [{\n      key: \"_init\",\n      value: function _init() {\n        this.items = this._getItems();\n        this.options.sizer = this._getElementOption(this.options.sizer); // Add class and invalidate styles\n\n        this.element.classList.add(Shuffle.Classes.BASE); // Set initial css for each item\n\n        this._initItems(this.items); // Bind resize events\n\n\n        this._onResize = this._getResizeFunction();\n        window.addEventListener('resize', this._onResize); // If the page has not already emitted the `load` event, call layout on load.\n        // This avoids layout issues caused by images and fonts loading after the\n        // instance has been initialized.\n\n        if (document.readyState !== 'complete') {\n          var layout = this.layout.bind(this);\n          window.addEventListener('load', function onLoad() {\n            window.removeEventListener('load', onLoad);\n            layout();\n          });\n        } // Get container css all in one request. Causes reflow\n\n\n        var containerCss = window.getComputedStyle(this.element, null);\n        var containerWidth = Shuffle.getSize(this.element).width; // Add styles to the container if it doesn't have them.\n\n        this._validateStyles(containerCss); // We already got the container's width above, no need to cause another\n        // reflow getting it again... Calculate the number of columns there will be\n\n\n        this._setColumns(containerWidth); // Kick off!\n\n\n        this.filter(this.options.group, this.options.initialSort); // The shuffle items haven't had transitions set on them yet so the user\n        // doesn't see the first layout. Set them now that the first layout is done.\n        // First, however, a synchronous layout must be caused for the previous\n        // styles to be applied without transitions.\n\n        this.element.offsetWidth; // eslint-disable-line no-unused-expressions\n\n        this.setItemTransitions(this.items);\n        this.element.style.transition = \"height \".concat(this.options.speed, \"ms \").concat(this.options.easing);\n      }\n      /**\n       * Returns a throttled and proxied function for the resize handler.\n       * @return {function}\n       * @private\n       */\n\n    }, {\n      key: \"_getResizeFunction\",\n      value: function _getResizeFunction() {\n        var resizeFunction = this._handleResize.bind(this);\n\n        return this.options.throttle ? this.options.throttle(resizeFunction, this.options.throttleTime) : resizeFunction;\n      }\n      /**\n       * Retrieve an element from an option.\n       * @param {string|jQuery|Element} option The option to check.\n       * @return {?Element} The plain element or null.\n       * @private\n       */\n\n    }, {\n      key: \"_getElementOption\",\n      value: function _getElementOption(option) {\n        // If column width is a string, treat is as a selector and search for the\n        // sizer element within the outermost container\n        if (typeof option === 'string') {\n          return this.element.querySelector(option);\n        } // Check for an element\n\n\n        if (option && option.nodeType && option.nodeType === 1) {\n          return option;\n        } // Check for jQuery object\n\n\n        if (option && option.jquery) {\n          return option[0];\n        }\n\n        return null;\n      }\n      /**\n       * Ensures the shuffle container has the css styles it needs applied to it.\n       * @param {Object} styles Key value pairs for position and overflow.\n       * @private\n       */\n\n    }, {\n      key: \"_validateStyles\",\n      value: function _validateStyles(styles) {\n        // Position cannot be static.\n        if (styles.position === 'static') {\n          this.element.style.position = 'relative';\n        } // Overflow has to be hidden.\n\n\n        if (styles.overflow !== 'hidden') {\n          this.element.style.overflow = 'hidden';\n        }\n      }\n      /**\n       * Filter the elements by a category.\n       * @param {string|string[]|function(Element):boolean} [category] Category to\n       *     filter by. If it's given, the last category will be used to filter the items.\n       * @param {Array} [collection] Optionally filter a collection. Defaults to\n       *     all the items.\n       * @return {{visible: ShuffleItem[], hidden: ShuffleItem[]}}\n       * @private\n       */\n\n    }, {\n      key: \"_filter\",\n      value: function _filter() {\n        var category = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.lastFilter;\n        var collection = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.items;\n\n        var set = this._getFilteredSets(category, collection); // Individually add/remove hidden/visible classes\n\n\n        this._toggleFilterClasses(set); // Save the last filter in case elements are appended.\n\n\n        this.lastFilter = category; // This is saved mainly because providing a filter function (like searching)\n        // will overwrite the `lastFilter` property every time its called.\n\n        if (typeof category === 'string') {\n          this.group = category;\n        }\n\n        return set;\n      }\n      /**\n       * Returns an object containing the visible and hidden elements.\n       * @param {string|string[]|function(Element):boolean} category Category or function to filter by.\n       * @param {ShuffleItem[]} items A collection of items to filter.\n       * @return {{visible: ShuffleItem[], hidden: ShuffleItem[]}}\n       * @private\n       */\n\n    }, {\n      key: \"_getFilteredSets\",\n      value: function _getFilteredSets(category, items) {\n        var _this2 = this;\n\n        var visible = [];\n        var hidden = []; // category === 'all', add visible class to everything\n\n        if (category === Shuffle.ALL_ITEMS) {\n          visible = items; // Loop through each item and use provided function to determine\n          // whether to hide it or not.\n        } else {\n          items.forEach(function (item) {\n            if (_this2._doesPassFilter(category, item.element)) {\n              visible.push(item);\n            } else {\n              hidden.push(item);\n            }\n          });\n        }\n\n        return {\n          visible: visible,\n          hidden: hidden\n        };\n      }\n      /**\n       * Test an item to see if it passes a category.\n       * @param {string|string[]|function():boolean} category Category or function to filter by.\n       * @param {Element} element An element to test.\n       * @return {boolean} Whether it passes the category/filter.\n       * @private\n       */\n\n    }, {\n      key: \"_doesPassFilter\",\n      value: function _doesPassFilter(category, element) {\n        if (typeof category === 'function') {\n          return category.call(element, element, this);\n        } // Check each element's data-groups attribute against the given category.\n\n\n        var attr = element.getAttribute('data-' + Shuffle.FILTER_ATTRIBUTE_KEY);\n        var keys = this.options.delimiter ? attr.split(this.options.delimiter) : JSON.parse(attr);\n\n        function testCategory(category) {\n          return keys.includes(category);\n        }\n\n        if (Array.isArray(category)) {\n          if (this.options.filterMode === Shuffle.FilterMode.ANY) {\n            return category.some(testCategory);\n          }\n\n          return category.every(testCategory);\n        }\n\n        return keys.includes(category);\n      }\n      /**\n       * Toggles the visible and hidden class names.\n       * @param {{visible, hidden}} Object with visible and hidden arrays.\n       * @private\n       */\n\n    }, {\n      key: \"_toggleFilterClasses\",\n      value: function _toggleFilterClasses(_ref) {\n        var visible = _ref.visible,\n            hidden = _ref.hidden;\n        visible.forEach(function (item) {\n          item.show();\n        });\n        hidden.forEach(function (item) {\n          item.hide();\n        });\n      }\n      /**\n       * Set the initial css for each item\n       * @param {ShuffleItem[]} items Set to initialize.\n       * @private\n       */\n\n    }, {\n      key: \"_initItems\",\n      value: function _initItems(items) {\n        items.forEach(function (item) {\n          item.init();\n        });\n      }\n      /**\n       * Remove element reference and styles.\n       * @param {ShuffleItem[]} items Set to dispose.\n       * @private\n       */\n\n    }, {\n      key: \"_disposeItems\",\n      value: function _disposeItems(items) {\n        items.forEach(function (item) {\n          item.dispose();\n        });\n      }\n      /**\n       * Updates the visible item count.\n       * @private\n       */\n\n    }, {\n      key: \"_updateItemCount\",\n      value: function _updateItemCount() {\n        this.visibleItems = this._getFilteredItems().length;\n      }\n      /**\n       * Sets css transform transition on a group of elements. This is not executed\n       * at the same time as `item.init` so that transitions don't occur upon\n       * initialization of a new Shuffle instance.\n       * @param {ShuffleItem[]} items Shuffle items to set transitions on.\n       * @protected\n       */\n\n    }, {\n      key: \"setItemTransitions\",\n      value: function setItemTransitions(items) {\n        var _this$options = this.options,\n            speed = _this$options.speed,\n            easing = _this$options.easing;\n        var positionProps = this.options.useTransforms ? ['transform'] : ['top', 'left']; // Allow users to transtion other properties if they exist in the `before`\n        // css mapping of the shuffle item.\n\n        var cssProps = Object.keys(ShuffleItem.Css.HIDDEN.before).map(function (k) {\n          return hyphenate(k);\n        });\n        var properties = positionProps.concat(cssProps).join();\n        items.forEach(function (item) {\n          item.element.style.transitionDuration = speed + 'ms';\n          item.element.style.transitionTimingFunction = easing;\n          item.element.style.transitionProperty = properties;\n        });\n      }\n    }, {\n      key: \"_getItems\",\n      value: function _getItems() {\n        var _this3 = this;\n\n        return Array.from(this.element.children).filter(function (el) {\n          return matchesSelector(el, _this3.options.itemSelector);\n        }).map(function (el) {\n          return new ShuffleItem(el);\n        });\n      }\n      /**\n       * Combine the current items array with a new one and sort it by DOM order.\n       * @param {ShuffleItem[]} items Items to track.\n       * @return {ShuffleItem[]}\n       */\n\n    }, {\n      key: \"_mergeNewItems\",\n      value: function _mergeNewItems(items) {\n        var children = Array.from(this.element.children);\n        return sorter(this.items.concat(items), {\n          by: function by(element) {\n            return children.indexOf(element);\n          }\n        });\n      }\n    }, {\n      key: \"_getFilteredItems\",\n      value: function _getFilteredItems() {\n        return this.items.filter(function (item) {\n          return item.isVisible;\n        });\n      }\n    }, {\n      key: \"_getConcealedItems\",\n      value: function _getConcealedItems() {\n        return this.items.filter(function (item) {\n          return !item.isVisible;\n        });\n      }\n      /**\n       * Returns the column size, based on column width and sizer options.\n       * @param {number} containerWidth Size of the parent container.\n       * @param {number} gutterSize Size of the gutters.\n       * @return {number}\n       * @private\n       */\n\n    }, {\n      key: \"_getColumnSize\",\n      value: function _getColumnSize(containerWidth, gutterSize) {\n        var size; // If the columnWidth property is a function, then the grid is fluid\n\n        if (typeof this.options.columnWidth === 'function') {\n          size = this.options.columnWidth(containerWidth); // columnWidth option isn't a function, are they using a sizing element?\n        } else if (this.options.sizer) {\n          size = Shuffle.getSize(this.options.sizer).width; // if not, how about the explicitly set option?\n        } else if (this.options.columnWidth) {\n          size = this.options.columnWidth; // or use the size of the first item\n        } else if (this.items.length > 0) {\n          size = Shuffle.getSize(this.items[0].element, true).width; // if there's no items, use size of container\n        } else {\n          size = containerWidth;\n        } // Don't let them set a column width of zero.\n\n\n        if (size === 0) {\n          size = containerWidth;\n        }\n\n        return size + gutterSize;\n      }\n      /**\n       * Returns the gutter size, based on gutter width and sizer options.\n       * @param {number} containerWidth Size of the parent container.\n       * @return {number}\n       * @private\n       */\n\n    }, {\n      key: \"_getGutterSize\",\n      value: function _getGutterSize(containerWidth) {\n        var size;\n\n        if (typeof this.options.gutterWidth === 'function') {\n          size = this.options.gutterWidth(containerWidth);\n        } else if (this.options.sizer) {\n          size = getNumberStyle(this.options.sizer, 'marginLeft');\n        } else {\n          size = this.options.gutterWidth;\n        }\n\n        return size;\n      }\n      /**\n       * Calculate the number of columns to be used. Gets css if using sizer element.\n       * @param {number} [containerWidth] Optionally specify a container width if\n       *    it's already available.\n       */\n\n    }, {\n      key: \"_setColumns\",\n      value: function _setColumns() {\n        var containerWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Shuffle.getSize(this.element).width;\n\n        var gutter = this._getGutterSize(containerWidth);\n\n        var columnWidth = this._getColumnSize(containerWidth, gutter);\n\n        var calculatedColumns = (containerWidth + gutter) / columnWidth; // Widths given from getStyles are not precise enough...\n\n        if (Math.abs(Math.round(calculatedColumns) - calculatedColumns) < this.options.columnThreshold) {\n          // e.g. calculatedColumns = 11.998876\n          calculatedColumns = Math.round(calculatedColumns);\n        }\n\n        this.cols = Math.max(Math.floor(calculatedColumns), 1);\n        this.containerWidth = containerWidth;\n        this.colWidth = columnWidth;\n      }\n      /**\n       * Adjust the height of the grid\n       */\n\n    }, {\n      key: \"_setContainerSize\",\n      value: function _setContainerSize() {\n        this.element.style.height = this._getContainerSize() + 'px';\n      }\n      /**\n       * Based on the column heights, it returns the biggest one.\n       * @return {number}\n       * @private\n       */\n\n    }, {\n      key: \"_getContainerSize\",\n      value: function _getContainerSize() {\n        return arrayMax(this.positions);\n      }\n      /**\n       * Get the clamped stagger amount.\n       * @param {number} index Index of the item to be staggered.\n       * @return {number}\n       */\n\n    }, {\n      key: \"_getStaggerAmount\",\n      value: function _getStaggerAmount(index) {\n        return Math.min(index * this.options.staggerAmount, this.options.staggerAmountMax);\n      }\n      /**\n       * Emit an event from this instance.\n       * @param {string} name Event name.\n       * @param {Object} [data={}] Optional object data.\n       */\n\n    }, {\n      key: \"_dispatch\",\n      value: function _dispatch(name) {\n        var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        if (this.isDestroyed) {\n          return;\n        }\n\n        data.shuffle = this;\n        this.emit(name, data);\n      }\n      /**\n       * Zeros out the y columns array, which is used to determine item placement.\n       * @private\n       */\n\n    }, {\n      key: \"_resetCols\",\n      value: function _resetCols() {\n        var i = this.cols;\n        this.positions = [];\n\n        while (i) {\n          i -= 1;\n          this.positions.push(0);\n        }\n      }\n      /**\n       * Loops through each item that should be shown and calculates the x, y position.\n       * @param {ShuffleItem[]} items Array of items that will be shown/layed\n       *     out in order in their array.\n       */\n\n    }, {\n      key: \"_layout\",\n      value: function _layout(items) {\n        var _this4 = this;\n\n        var itemPositions = this._getNextPositions(items);\n\n        var count = 0;\n        items.forEach(function (item, i) {\n          function callback() {\n            item.applyCss(ShuffleItem.Css.VISIBLE.after);\n          } // If the item will not change its position, do not add it to the render\n          // queue. Transitions don't fire when setting a property to the same value.\n\n\n          if (Point.equals(item.point, itemPositions[i]) && !item.isHidden) {\n            item.applyCss(ShuffleItem.Css.VISIBLE.before);\n            callback();\n            return;\n          }\n\n          item.point = itemPositions[i];\n          item.scale = ShuffleItem.Scale.VISIBLE;\n          item.isHidden = false; // Clone the object so that the `before` object isn't modified when the\n          // transition delay is added.\n\n          var styles = _this4.getStylesForTransition(item, ShuffleItem.Css.VISIBLE.before);\n\n          styles.transitionDelay = _this4._getStaggerAmount(count) + 'ms';\n\n          _this4._queue.push({\n            item: item,\n            styles: styles,\n            callback: callback\n          });\n\n          count += 1;\n        });\n      }\n      /**\n       * Return an array of Point instances representing the future positions of\n       * each item.\n       * @param {ShuffleItem[]} items Array of sorted shuffle items.\n       * @return {Point[]}\n       * @private\n       */\n\n    }, {\n      key: \"_getNextPositions\",\n      value: function _getNextPositions(items) {\n        var _this5 = this;\n\n        // If position data is going to be changed, add the item's size to the\n        // transformer to allow for calculations.\n        if (this.options.isCentered) {\n          var itemsData = items.map(function (item, i) {\n            var itemSize = Shuffle.getSize(item.element, true);\n\n            var point = _this5._getItemPosition(itemSize);\n\n            return new Rect(point.x, point.y, itemSize.width, itemSize.height, i);\n          });\n          return this.getTransformedPositions(itemsData, this.containerWidth);\n        } // If no transforms are going to happen, simply return an array of the\n        // future points of each item.\n\n\n        return items.map(function (item) {\n          return _this5._getItemPosition(Shuffle.getSize(item.element, true));\n        });\n      }\n      /**\n       * Determine the location of the next item, based on its size.\n       * @param {{width: number, height: number}} itemSize Object with width and height.\n       * @return {Point}\n       * @private\n       */\n\n    }, {\n      key: \"_getItemPosition\",\n      value: function _getItemPosition(itemSize) {\n        return getItemPosition({\n          itemSize: itemSize,\n          positions: this.positions,\n          gridSize: this.colWidth,\n          total: this.cols,\n          threshold: this.options.columnThreshold,\n          buffer: this.options.buffer\n        });\n      }\n      /**\n       * Mutate positions before they're applied.\n       * @param {Rect[]} itemRects Item data objects.\n       * @param {number} containerWidth Width of the containing element.\n       * @return {Point[]}\n       * @protected\n       */\n\n    }, {\n      key: \"getTransformedPositions\",\n      value: function getTransformedPositions(itemRects, containerWidth) {\n        return getCenteredPositions(itemRects, containerWidth);\n      }\n      /**\n       * Hides the elements that don't match our filter.\n       * @param {ShuffleItem[]} collection Collection to shrink.\n       * @private\n       */\n\n    }, {\n      key: \"_shrink\",\n      value: function _shrink() {\n        var _this6 = this;\n\n        var collection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._getConcealedItems();\n        var count = 0;\n        collection.forEach(function (item) {\n          function callback() {\n            item.applyCss(ShuffleItem.Css.HIDDEN.after);\n          } // Continuing would add a transitionend event listener to the element, but\n          // that listener would not execute because the transform and opacity would\n          // stay the same.\n          // The callback is executed here because it is not guaranteed to be called\n          // after the transitionend event because the transitionend could be\n          // canceled if another animation starts.\n\n\n          if (item.isHidden) {\n            item.applyCss(ShuffleItem.Css.HIDDEN.before);\n            callback();\n            return;\n          }\n\n          item.scale = ShuffleItem.Scale.HIDDEN;\n          item.isHidden = true;\n\n          var styles = _this6.getStylesForTransition(item, ShuffleItem.Css.HIDDEN.before);\n\n          styles.transitionDelay = _this6._getStaggerAmount(count) + 'ms';\n\n          _this6._queue.push({\n            item: item,\n            styles: styles,\n            callback: callback\n          });\n\n          count += 1;\n        });\n      }\n      /**\n       * Resize handler.\n       * @private\n       */\n\n    }, {\n      key: \"_handleResize\",\n      value: function _handleResize() {\n        // If shuffle is disabled, destroyed, don't do anything\n        if (!this.isEnabled || this.isDestroyed) {\n          return;\n        }\n\n        this.update();\n      }\n      /**\n       * Returns styles which will be applied to the an item for a transition.\n       * @param {ShuffleItem} item Item to get styles for. Should have updated\n       *   scale and point properties.\n       * @param {Object} styleObject Extra styles that will be used in the transition.\n       * @return {!Object} Transforms for transitions, left/top for animate.\n       * @protected\n       */\n\n    }, {\n      key: \"getStylesForTransition\",\n      value: function getStylesForTransition(item, styleObject) {\n        // Clone the object to avoid mutating the original.\n        var styles = Object.assign({}, styleObject);\n\n        if (this.options.useTransforms) {\n          var x = this.options.roundTransforms ? Math.round(item.point.x) : item.point.x;\n          var y = this.options.roundTransforms ? Math.round(item.point.y) : item.point.y;\n          styles.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px) scale(\").concat(item.scale, \")\");\n        } else {\n          styles.left = item.point.x + 'px';\n          styles.top = item.point.y + 'px';\n        }\n\n        return styles;\n      }\n      /**\n       * Listen for the transition end on an element and execute the itemCallback\n       * when it finishes.\n       * @param {Element} element Element to listen on.\n       * @param {function} itemCallback Callback for the item.\n       * @param {function} done Callback to notify `parallel` that this one is done.\n       */\n\n    }, {\n      key: \"_whenTransitionDone\",\n      value: function _whenTransitionDone(element, itemCallback, done) {\n        var id = onTransitionEnd(element, function (evt) {\n          itemCallback();\n          done(null, evt);\n        });\n\n        this._transitions.push(id);\n      }\n      /**\n       * Return a function which will set CSS styles and call the `done` function\n       * when (if) the transition finishes.\n       * @param {Object} opts Transition object.\n       * @return {function} A function to be called with a `done` function.\n       */\n\n    }, {\n      key: \"_getTransitionFunction\",\n      value: function _getTransitionFunction(opts) {\n        var _this7 = this;\n\n        return function (done) {\n          opts.item.applyCss(opts.styles);\n\n          _this7._whenTransitionDone(opts.item.element, opts.callback, done);\n        };\n      }\n      /**\n       * Execute the styles gathered in the style queue. This applies styles to elements,\n       * triggering transitions.\n       * @private\n       */\n\n    }, {\n      key: \"_processQueue\",\n      value: function _processQueue() {\n        if (this.isTransitioning) {\n          this._cancelMovement();\n        }\n\n        var hasSpeed = this.options.speed > 0;\n        var hasQueue = this._queue.length > 0;\n\n        if (hasQueue && hasSpeed && this.isInitialized) {\n          this._startTransitions(this._queue);\n        } else if (hasQueue) {\n          this._styleImmediately(this._queue);\n\n          this._dispatch(Shuffle.EventType.LAYOUT); // A call to layout happened, but none of the newly visible items will\n          // change position or the transition duration is zero, which will not trigger\n          // the transitionend event.\n\n        } else {\n          this._dispatch(Shuffle.EventType.LAYOUT);\n        } // Remove everything in the style queue\n\n\n        this._queue.length = 0;\n      }\n      /**\n       * Wait for each transition to finish, the emit the layout event.\n       * @param {Object[]} transitions Array of transition objects.\n       */\n\n    }, {\n      key: \"_startTransitions\",\n      value: function _startTransitions(transitions) {\n        var _this8 = this;\n\n        // Set flag that shuffle is currently in motion.\n        this.isTransitioning = true; // Create an array of functions to be called.\n\n        var callbacks = transitions.map(function (obj) {\n          return _this8._getTransitionFunction(obj);\n        });\n        arrayParallel(callbacks, this._movementFinished.bind(this));\n      }\n    }, {\n      key: \"_cancelMovement\",\n      value: function _cancelMovement() {\n        // Remove the transition end event for each listener.\n        this._transitions.forEach(cancelTransitionEnd); // Reset the array.\n\n\n        this._transitions.length = 0; // Show it's no longer active.\n\n        this.isTransitioning = false;\n      }\n      /**\n       * Apply styles without a transition.\n       * @param {Object[]} objects Array of transition objects.\n       * @private\n       */\n\n    }, {\n      key: \"_styleImmediately\",\n      value: function _styleImmediately(objects) {\n        if (objects.length) {\n          var elements = objects.map(function (obj) {\n            return obj.item.element;\n          });\n\n          Shuffle._skipTransitions(elements, function () {\n            objects.forEach(function (obj) {\n              obj.item.applyCss(obj.styles);\n              obj.callback();\n            });\n          });\n        }\n      }\n    }, {\n      key: \"_movementFinished\",\n      value: function _movementFinished() {\n        this._transitions.length = 0;\n        this.isTransitioning = false;\n\n        this._dispatch(Shuffle.EventType.LAYOUT);\n      }\n      /**\n       * The magic. This is what makes the plugin 'shuffle'\n       * @param {string|string[]|function(Element):boolean} [category] Category to filter by.\n       *     Can be a function, string, or array of strings.\n       * @param {Object} [sortObj] A sort object which can sort the visible set\n       */\n\n    }, {\n      key: \"filter\",\n      value: function filter(category, sortObj) {\n        if (!this.isEnabled) {\n          return;\n        }\n\n        if (!category || category && category.length === 0) {\n          category = Shuffle.ALL_ITEMS; // eslint-disable-line no-param-reassign\n        }\n\n        this._filter(category); // Shrink each hidden item\n\n\n        this._shrink(); // How many visible elements?\n\n\n        this._updateItemCount(); // Update transforms on visible elements so they will animate to their new positions.\n\n\n        this.sort(sortObj);\n      }\n      /**\n       * Gets the visible elements, sorts them, and passes them to layout.\n       * @param {Object} [sortOptions] The options object to pass to `sorter`.\n       */\n\n    }, {\n      key: \"sort\",\n      value: function sort() {\n        var sortOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.lastSort;\n\n        if (!this.isEnabled) {\n          return;\n        }\n\n        this._resetCols();\n\n        var items = sorter(this._getFilteredItems(), sortOptions);\n\n        this._layout(items); // `_layout` always happens after `_shrink`, so it's safe to process the style\n        // queue here with styles from the shrink method.\n\n\n        this._processQueue(); // Adjust the height of the container.\n\n\n        this._setContainerSize();\n\n        this.lastSort = sortOptions;\n      }\n      /**\n       * Reposition everything.\n       * @param {boolean} [isOnlyLayout=false] If true, column and gutter widths won't be recalculated.\n       */\n\n    }, {\n      key: \"update\",\n      value: function update() {\n        var isOnlyLayout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        if (this.isEnabled) {\n          if (!isOnlyLayout) {\n            // Get updated colCount\n            this._setColumns();\n          } // Layout items\n\n\n          this.sort();\n        }\n      }\n      /**\n       * Use this instead of `update()` if you don't need the columns and gutters updated\n       * Maybe an image inside `shuffle` loaded (and now has a height), which means calculations\n       * could be off.\n       */\n\n    }, {\n      key: \"layout\",\n      value: function layout() {\n        this.update(true);\n      }\n      /**\n       * New items have been appended to shuffle. Mix them in with the current\n       * filter or sort status.\n       * @param {Element[]} newItems Collection of new items.\n       */\n\n    }, {\n      key: \"add\",\n      value: function add(newItems) {\n        var _this9 = this;\n\n        var items = arrayUnique(newItems).map(function (el) {\n          return new ShuffleItem(el);\n        }); // Add classes and set initial positions.\n\n        this._initItems(items); // Determine which items will go with the current filter.\n\n\n        this._resetCols();\n\n        var allItems = this._mergeNewItems(items);\n\n        var sortedItems = sorter(allItems, this.lastSort);\n\n        var allSortedItemsSet = this._filter(this.lastFilter, sortedItems);\n\n        var isNewItem = function isNewItem(item) {\n          return items.includes(item);\n        };\n\n        var applyHiddenState = function applyHiddenState(item) {\n          item.scale = ShuffleItem.Scale.HIDDEN;\n          item.isHidden = true;\n          item.applyCss(ShuffleItem.Css.HIDDEN.before);\n          item.applyCss(ShuffleItem.Css.HIDDEN.after);\n        }; // Layout all items again so that new items get positions.\n        // Synchonously apply positions.\n\n\n        var itemPositions = this._getNextPositions(allSortedItemsSet.visible);\n\n        allSortedItemsSet.visible.forEach(function (item, i) {\n          if (isNewItem(item)) {\n            item.point = itemPositions[i];\n            applyHiddenState(item);\n            item.applyCss(_this9.getStylesForTransition(item, {}));\n          }\n        });\n        allSortedItemsSet.hidden.forEach(function (item) {\n          if (isNewItem(item)) {\n            applyHiddenState(item);\n          }\n        }); // Cause layout so that the styles above are applied.\n\n        this.element.offsetWidth; // eslint-disable-line no-unused-expressions\n        // Add transition to each item.\n\n        this.setItemTransitions(items); // Update the list of items.\n\n        this.items = this._mergeNewItems(items); // Update layout/visibility of new and old items.\n\n        this.filter(this.lastFilter);\n      }\n      /**\n       * Disables shuffle from updating dimensions and layout on resize\n       */\n\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        this.isEnabled = false;\n      }\n      /**\n       * Enables shuffle again\n       * @param {boolean} [isUpdateLayout=true] if undefined, shuffle will update columns and gutters\n       */\n\n    }, {\n      key: \"enable\",\n      value: function enable() {\n        var isUpdateLayout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        this.isEnabled = true;\n\n        if (isUpdateLayout) {\n          this.update();\n        }\n      }\n      /**\n       * Remove 1 or more shuffle items.\n       * @param {Element[]} elements An array containing one or more\n       *     elements in shuffle\n       * @return {Shuffle} The shuffle instance.\n       */\n\n    }, {\n      key: \"remove\",\n      value: function remove(elements) {\n        var _this10 = this;\n\n        if (!elements.length) {\n          return;\n        }\n\n        var collection = arrayUnique(elements);\n        var oldItems = collection.map(function (element) {\n          return _this10.getItemByElement(element);\n        }).filter(function (item) {\n          return !!item;\n        });\n\n        var handleLayout = function handleLayout() {\n          _this10._disposeItems(oldItems); // Remove the collection in the callback\n\n\n          collection.forEach(function (element) {\n            element.parentNode.removeChild(element);\n          });\n\n          _this10._dispatch(Shuffle.EventType.REMOVED, {\n            collection: collection\n          });\n        }; // Hide collection first.\n\n\n        this._toggleFilterClasses({\n          visible: [],\n          hidden: oldItems\n        });\n\n        this._shrink(oldItems);\n\n        this.sort(); // Update the list of items here because `remove` could be called again\n        // with an item that is in the process of being removed.\n\n        this.items = this.items.filter(function (item) {\n          return !oldItems.includes(item);\n        });\n\n        this._updateItemCount();\n\n        this.once(Shuffle.EventType.LAYOUT, handleLayout);\n      }\n      /**\n       * Retrieve a shuffle item by its element.\n       * @param {Element} element Element to look for.\n       * @return {?ShuffleItem} A shuffle item or undefined if it's not found.\n       */\n\n    }, {\n      key: \"getItemByElement\",\n      value: function getItemByElement(element) {\n        return this.items.find(function (item) {\n          return item.element === element;\n        });\n      }\n      /**\n       * Dump the elements currently stored and reinitialize all child elements which\n       * match the `itemSelector`.\n       */\n\n    }, {\n      key: \"resetItems\",\n      value: function resetItems() {\n        var _this11 = this;\n\n        // Remove refs to current items.\n        this._disposeItems(this.items);\n\n        this.isInitialized = false; // Find new items in the DOM.\n\n        this.items = this._getItems(); // Set initial styles on the new items.\n\n        this._initItems(this.items);\n\n        this.once(Shuffle.EventType.LAYOUT, function () {\n          // Add transition to each item.\n          _this11.setItemTransitions(_this11.items);\n\n          _this11.isInitialized = true;\n        }); // Lay out all items.\n\n        this.filter(this.lastFilter);\n      }\n      /**\n       * Destroys shuffle, removes events, styles, and classes\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this._cancelMovement();\n\n        window.removeEventListener('resize', this._onResize); // Reset container styles\n\n        this.element.classList.remove('shuffle');\n        this.element.removeAttribute('style'); // Reset individual item styles\n\n        this._disposeItems(this.items);\n\n        this.items.length = 0;\n        this._transitions.length = 0; // Null DOM references\n\n        this.options.sizer = null;\n        this.element = null; // Set a flag so if a debounced resize has been triggered,\n        // it can first check if it is actually isDestroyed and not doing anything\n\n        this.isDestroyed = true;\n        this.isEnabled = false;\n      }\n      /**\n       * Returns the outer width of an element, optionally including its margins.\n       *\n       * There are a few different methods for getting the width of an element, none of\n       * which work perfectly for all Shuffle's use cases.\n       *\n       * 1. getBoundingClientRect() `left` and `right` properties.\n       *   - Accounts for transform scaled elements, making it useless for Shuffle\n       *   elements which have shrunk.\n       * 2. The `offsetWidth` property.\n       *   - This value stays the same regardless of the elements transform property,\n       *   however, it does not return subpixel values.\n       * 3. getComputedStyle()\n       *   - This works great Chrome, Firefox, Safari, but IE<=11 does not include\n       *   padding and border when box-sizing: border-box is set, requiring a feature\n       *   test and extra work to add the padding back for IE and other browsers which\n       *   follow the W3C spec here.\n       *\n       * @param {Element} element The element.\n       * @param {boolean} [includeMargins=false] Whether to include margins.\n       * @return {{width: number, height: number}} The width and height.\n       */\n\n    }], [{\n      key: \"getSize\",\n      value: function getSize(element) {\n        var includeMargins = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        // Store the styles so that they can be used by others without asking for it again.\n        var styles = window.getComputedStyle(element, null);\n        var width = getNumberStyle(element, 'width', styles);\n        var height = getNumberStyle(element, 'height', styles);\n\n        if (includeMargins) {\n          var marginLeft = getNumberStyle(element, 'marginLeft', styles);\n          var marginRight = getNumberStyle(element, 'marginRight', styles);\n          var marginTop = getNumberStyle(element, 'marginTop', styles);\n          var marginBottom = getNumberStyle(element, 'marginBottom', styles);\n          width += marginLeft + marginRight;\n          height += marginTop + marginBottom;\n        }\n\n        return {\n          width: width,\n          height: height\n        };\n      }\n      /**\n       * Change a property or execute a function which will not have a transition\n       * @param {Element[]} elements DOM elements that won't be transitioned.\n       * @param {function} callback A function which will be called while transition\n       *     is set to 0ms.\n       * @private\n       */\n\n    }, {\n      key: \"_skipTransitions\",\n      value: function _skipTransitions(elements, callback) {\n        var zero = '0ms'; // Save current duration and delay.\n\n        var data = elements.map(function (element) {\n          var style = element.style;\n          var duration = style.transitionDuration;\n          var delay = style.transitionDelay; // Set the duration to zero so it happens immediately\n\n          style.transitionDuration = zero;\n          style.transitionDelay = zero;\n          return {\n            duration: duration,\n            delay: delay\n          };\n        });\n        callback(); // Cause forced synchronous layout.\n\n        elements[0].offsetWidth; // eslint-disable-line no-unused-expressions\n        // Put the duration back\n\n        elements.forEach(function (element, i) {\n          element.style.transitionDuration = data[i].duration;\n          element.style.transitionDelay = data[i].delay;\n        });\n      }\n    }]);\n\n    return Shuffle;\n  }(tinyEmitter);\n\n  Shuffle.ShuffleItem = ShuffleItem;\n  Shuffle.ALL_ITEMS = 'all';\n  Shuffle.FILTER_ATTRIBUTE_KEY = 'groups';\n  /** @enum {string} */\n\n  Shuffle.EventType = {\n    LAYOUT: 'shuffle:layout',\n    REMOVED: 'shuffle:removed'\n  };\n  /** @enum {string} */\n\n  Shuffle.Classes = Classes;\n  /** @enum {string} */\n\n  Shuffle.FilterMode = {\n    ANY: 'any',\n    ALL: 'all'\n  }; // Overrideable options\n\n  Shuffle.options = {\n    // Initial filter group.\n    group: Shuffle.ALL_ITEMS,\n    // Transition/animation speed (milliseconds).\n    speed: 250,\n    // CSS easing function to use.\n    easing: 'cubic-bezier(0.4, 0.0, 0.2, 1)',\n    // e.g. '.picture-item'.\n    itemSelector: '*',\n    // Element or selector string. Use an element to determine the size of columns\n    // and gutters.\n    sizer: null,\n    // A static number or function that tells the plugin how wide the gutters\n    // between columns are (in pixels).\n    gutterWidth: 0,\n    // A static number or function that returns a number which tells the plugin\n    // how wide the columns are (in pixels).\n    columnWidth: 0,\n    // If your group is not json, and is comma delimeted, you could set delimiter\n    // to ','.\n    delimiter: null,\n    // Useful for percentage based heights when they might not always be exactly\n    // the same (in pixels).\n    buffer: 0,\n    // Reading the width of elements isn't precise enough and can cause columns to\n    // jump between values.\n    columnThreshold: 0.01,\n    // Shuffle can be isInitialized with a sort object. It is the same object\n    // given to the sort method.\n    initialSort: null,\n    // By default, shuffle will throttle resize events. This can be changed or\n    // removed.\n    throttle: throttleit,\n    // How often shuffle can be called on resize (in milliseconds).\n    throttleTime: 300,\n    // Transition delay offset for each item in milliseconds.\n    staggerAmount: 15,\n    // Maximum stagger delay in milliseconds.\n    staggerAmountMax: 150,\n    // Whether to use transforms or absolute positioning.\n    useTransforms: true,\n    // Affects using an array with filter. e.g. `filter(['one', 'two'])`. With \"any\",\n    // the element passes the test if any of its groups are in the array. With \"all\",\n    // the element only passes if all groups are in the array.\n    filterMode: Shuffle.FilterMode.ANY,\n    // Attempt to center grid items in each row.\n    isCentered: false,\n    // Whether to round pixel values used in translate(x, y). This usually avoids\n    // blurriness.\n    roundTransforms: true\n  };\n  Shuffle.Point = Point;\n  Shuffle.Rect = Rect; // Expose for testing. Hack at your own risk.\n\n  Shuffle.__sorter = sorter;\n  Shuffle.__getColumnSpan = getColumnSpan;\n  Shuffle.__getAvailablePositions = getAvailablePositions;\n  Shuffle.__getShortColumn = getShortColumn;\n  Shuffle.__getCenteredPositions = getCenteredPositions;\n\n  return Shuffle;\n\n})));\n\n"]}